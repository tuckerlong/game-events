<!DOCTYPE html>
<html>
<head>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</head>
<body>
	<a href="https://github.com/tuckerlong/game-events-data/blob/main/src/data.json">Raw Data</a>
	<span>Last Cache: <span id="last_cache"></span></span>

	<div class="container">
		<div id="card-base" class="card col-sm-6" style="width: 18rem; margin: 5px" hidden>
			<div class="card-body">
				<h5 class="card-title">Card title</h5>
				<p class="card-text">
					<ul class="card-list">
					</ul>
				</p>
			</div>
		</div>

		<div id="cards" class="row"></div>
	</div>

	<script>
		async function run() {
			const data = await (await fetch('src/data.json')).json();
			const base = document.getElementById("card-base");

			document.getElementById("last_cache").innerText = data["last_cache"];

			Object.keys(data).forEach(key => {
				if (key === 'last_cache') return;

				const copy = base.cloneNode(true);
				copy.getRootNode().removeAttribute('hidden');
				copy.querySelector('.card-title').innerText = key;

				const eventList = copy.querySelector('.card-list');

				Object.keys(data[key]).forEach(eventName => {
					const element = document.createElement('li');
					const link = document.createElement('a');

					link.innerText = eventName;
					link.setAttribute('href', data[key][eventName]);
					link.setAttribute("target", "_blank");
					
					element.appendChild(link);
					eventList.appendChild(element);
				});

				document.getElementById("cards").appendChild(copy);
			});
		};

		run();
	</script>
</body>
</html>